<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paiement Carte</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0f0f10;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.card{
  width:420px;
  max-width:95vw;
  background:#f3f3f3;
  border-radius:20px;
  overflow:hidden;
}

.header{padding:22px;background:#e9e9e9}
.price{font-size:34px;font-weight:bold}

.section{padding:20px;border-top:1px solid #ddd}

.input-group{margin-bottom:14px}
label{font-size:13px;color:#666}

input{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-top:5px;
}

.pay-btn{
  margin:20px;
  width:calc(100% - 40px);
  padding:16px;
  border:none;
  border-radius:14px;
  background:#111;
  color:white;
  font-size:16px;
  cursor:pointer;
}

.success-overlay{
  position:fixed;
  inset:0;
  background:#0f0f10;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:white;
  opacity:0;
  pointer-events:none;
  transition:.4s;
}

.success-overlay.show{
  opacity:1;
  pointer-events:auto;
}
</style>
</head>

<body>

<div class="card">

<div class="header">
  <b>BlackSmoke</b>
  <div class="price">20 €</div>
</div>

<div class="section">
  <div class="input-group">
    <label>Nom complet</label>
    <input id="clientName">
  </div>

  <div class="input-group">
    <label>Email</label>
    <input id="clientEmail">
  </div>

  <div class="input-group">
    <label>Nom titulaire</label>
    <input id="cardName">
  </div>

  <div class="input-group">
    <label>Numéro de carte</label>
    <input id="cardNumber" maxlength="19">
  </div>

  <div class="input-group">
    <label>Expiration</label>
    <input id="cardExpiry" maxlength="7">
  </div>

  <div class="input-group">
    <label>CVC</label>
    <input id="cardCVC" maxlength="4">
  </div>
</div>

<button class="pay-btn" onclick="validatePayment()">
Payer maintenant
</button>

</div>

<div class="success-overlay" id="successOverlay">
  <h2>✅ Paiement confirmé</h2>
</div>

<script>

cardNumber.addEventListener('input',e=>{
  let v=e.target.value.replace(/\D/g,'').substring(0,16);
  e.target.value=v.match(/.{1,4}/g)?.join(' ')||'';
});

cardExpiry.addEventListener('input',e=>{
  let v=e.target.value.replace(/\D/g,'').substring(0,4);
  if(v.length>=3) v=v.substring(0,2)+' / '+v.substring(2);
  e.target.value=v;
});

cardCVC.addEventListener('input',e=>{
  e.target.value=e.target.value.replace(/\D/g,'').substring(0,4);
});

function validatePayment(){

  const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const numberRegex=/^\d{4} \d{4} \d{4} \d{4}$/;
  const expiryRegex=/^(0[1-9]|1[0-2]) \/ \d{2}$/;
  const cvcRegex=/^\d{3,4}$/;

  if(!clientName.value.trim() ||
     !emailRegex.test(clientEmail.value)){
      alert("Informations personnelles invalides");
      return;
  }

  if(!cardName.value.trim()){
    alert("Nom titulaire requis");
    return;
  }

  if(!numberRegex.test(cardNumber.value)){
    alert("Numéro de carte invalide");
    return;
  }

  if(!expiryRegex.test(cardExpiry.value)){
    alert("Date expiration invalide");
    return;
  }

  if(!cvcRegex.test(cardCVC.value)){
    alert("CVC invalide");
    return;
  }

  document.getElementById("successOverlay")
    .classList.add("show");
}

</script>

</body>
</html>
